{
  "$comment": "This file is for configuring JavaScript based tooling used for repository-wide commit linting, dependency management, and semantic release numbering. Please see CONTRIBUTING.md for more details.",
  "version": "1.16.0",
  "scripts": {
    "prepare": "husky install"
  },
  "devDependencies": {
    "@commitlint/cli": "^17.3.0",
    "@commitlint/config-conventional": "^17.3.0",
    "husky": "^8.0.2"
  },
  "commitlint": {
    "extends": [
      "@commitlint/config-conventional"
    ],
    "rules": {
      "scope-case": [
        2,
        "always",
        "sentence-case"
      ],
      "subject-case": [
        2,
        "always",
        "sentence-case"
      ]
    }
  },
  "renovate": {
    "extends": [
      "config:base"
    ],
    "dependencyDashboard": true,
    "dependencyDashboardTitle": "Update dependencies",
    "semanticCommits": "enabled",
    "packageRules": [
      {
        "matchDepTypes": [
          "dependencies"
        ],
        "semanticCommitType": "fix",
        "semanticCommitScope": "Dependencies",
        "automerge": false
      },
      {
        "matchDepTypes": [
          "devDependencies"
        ],
        "semanticCommitType": "chore",
        "semanticCommitScope": "Development dependencies",
        "automerge": true
      }
    ]
  },
  "release": {
    "branches": [
      "main"
    ],
    "plugins": [
      [
        "@semantic-release/commit-analyzer",
        {
          "preset": "angular",
          "releaseRules": [
            {
              "type": "build",
              "release": "patch"
            }
          ]
        }
      ],
      "@semantic-release/release-notes-generator",
      "@semantic-release/changelog",
      [
        "@semantic-release/exec",
        {
          "prepareCmd": "./scripts/prepare-release.sh ${nextRelease.version}"
        }
      ],
      [
        "@semantic-release/git",
        {
          "assets": [
            "CHANGELOG.md",
            "package.json",
            "Cargo.lock",
            "node/package.json",
            "node/package-lock.json",
            "node/Cargo.toml",
            "node/src/types.ts",
            "python/Cargo.toml",
            "python/setup.py",
            "python/stencila/schema/types.py",
            "r/Cargo.toml",
            "r/DESCRIPTION",
            "r/NAMESPACE",
            "r/R/types.R",
            "rust/stencila/Cargo.toml",
            "rust/schema/src/types.rs",
            "rust/schema/src/schemas.rs",
            "rust/schema/src/ids.rs",
            "web/package.json",
            "web/package-lock.json"
          ]
        }
      ],
      "@semantic-release/github"
    ]
  }
}
